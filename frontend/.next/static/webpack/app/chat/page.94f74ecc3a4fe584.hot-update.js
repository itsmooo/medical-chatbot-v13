"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/chat/page",{

/***/ "(app-pages-browser)/./src/app/lib/auth.ts":
/*!*****************************!*\
  !*** ./src/app/lib/auth.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authFetch: function() { return /* binding */ authFetch; },\n/* harmony export */   getAuthUser: function() { return /* binding */ getAuthUser; },\n/* harmony export */   getToken: function() { return /* binding */ getToken; },\n/* harmony export */   isAuthenticated: function() { return /* binding */ isAuthenticated; },\n/* harmony export */   removeToken: function() { return /* binding */ removeToken; },\n/* harmony export */   setToken: function() { return /* binding */ setToken; }\n/* harmony export */ });\n// Authentication utility functions\n// Store token in localStorage\nconst setToken = (token)=>{\n    if (true) {\n        localStorage.setItem(\"auth_token\", token);\n    }\n};\n// Get token from localStorage\nconst getToken = ()=>{\n    if (true) {\n        return localStorage.getItem(\"auth_token\");\n    }\n    return null;\n};\n// Remove token from localStorage\nconst removeToken = ()=>{\n    if (true) {\n        localStorage.removeItem(\"auth_token\");\n    }\n};\n// Check if user is authenticated\nconst isAuthenticated = ()=>{\n    const token = getToken();\n    return !!token;\n};\n// Get authenticated user from token\nconst getAuthUser = ()=>{\n    const token = getToken();\n    if (!token) return null;\n    try {\n        // Decode JWT token (simple decode, not verification)\n        const base64Url = token.split(\".\")[1];\n        const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n        const jsonPayload = decodeURIComponent(atob(base64).split(\"\").map((c)=>\"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2)).join(\"\"));\n        const payload = JSON.parse(jsonPayload);\n        console.log(\"Decoded JWT payload:\", payload); // Debug log to see the actual payload structure\n        // Return user object with consistent structure for frontend components\n        return {\n            id: payload.sub,\n            name: payload.username || \"Unknown\",\n            email: payload.email,\n            role: payload.role\n        };\n    } catch (error) {\n        console.error(\"Error decoding token:\", error);\n        removeToken(); // Remove invalid token\n        return null;\n    }\n};\n// Create authenticated fetch function that includes the token\nconst authFetch = async function(url) {\n    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n    const token = getToken();\n    // Create a proper Headers object\n    const headers = new Headers(options.headers);\n    headers.set(\"Content-Type\", \"application/json\");\n    if (token) {\n        headers.set(\"Authorization\", \"Bearer \".concat(token));\n    }\n    return fetch(url, {\n        ...options,\n        headers\n    });\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsbUNBQW1DO0FBRW5DLDhCQUE4QjtBQUN2QixNQUFNQSxXQUFXLENBQUNDO0lBQ3ZCLElBQUksSUFBa0IsRUFBYTtRQUNqQ0MsYUFBYUMsT0FBTyxDQUFDLGNBQWNGO0lBQ3JDO0FBQ0YsRUFBRTtBQUVGLDhCQUE4QjtBQUN2QixNQUFNRyxXQUFXO0lBQ3RCLElBQUksSUFBa0IsRUFBYTtRQUNqQyxPQUFPRixhQUFhRyxPQUFPLENBQUM7SUFDOUI7SUFDQSxPQUFPO0FBQ1QsRUFBRTtBQUVGLGlDQUFpQztBQUMxQixNQUFNQyxjQUFjO0lBQ3pCLElBQUksSUFBa0IsRUFBYTtRQUNqQ0osYUFBYUssVUFBVSxDQUFDO0lBQzFCO0FBQ0YsRUFBRTtBQUVGLGlDQUFpQztBQUMxQixNQUFNQyxrQkFBa0I7SUFDN0IsTUFBTVAsUUFBUUc7SUFDZCxPQUFPLENBQUMsQ0FBQ0g7QUFDWCxFQUFFO0FBRUYsb0NBQW9DO0FBQzdCLE1BQU1RLGNBQWM7SUFDekIsTUFBTVIsUUFBUUc7SUFDZCxJQUFJLENBQUNILE9BQU8sT0FBTztJQUVuQixJQUFJO1FBQ0YscURBQXFEO1FBQ3JELE1BQU1TLFlBQVlULE1BQU1VLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNyQyxNQUFNQyxTQUFTRixVQUFVRyxPQUFPLENBQUMsTUFBTSxLQUFLQSxPQUFPLENBQUMsTUFBTTtRQUMxRCxNQUFNQyxjQUFjQyxtQkFDbEJDLEtBQUtKLFFBQ0ZELEtBQUssQ0FBQyxJQUNOTSxHQUFHLENBQUMsQ0FBQ0MsSUFBTSxNQUFNLENBQUMsT0FBT0EsRUFBRUMsVUFBVSxDQUFDLEdBQUdDLFFBQVEsQ0FBQyxHQUFFLEVBQUdDLEtBQUssQ0FBQyxDQUFDLElBQzlEQyxJQUFJLENBQUM7UUFHVixNQUFNQyxVQUFVQyxLQUFLQyxLQUFLLENBQUNYO1FBQzNCWSxRQUFRQyxHQUFHLENBQUMsd0JBQXdCSixVQUFVLGdEQUFnRDtRQUU5Rix1RUFBdUU7UUFDdkUsT0FBTztZQUNMSyxJQUFJTCxRQUFRTSxHQUFHO1lBQ2ZDLE1BQU1QLFFBQVFRLFFBQVEsSUFBSTtZQUMxQkMsT0FBT1QsUUFBUVMsS0FBSztZQUNwQkMsTUFBTVYsUUFBUVUsSUFBSTtRQUNwQjtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkUixRQUFRUSxLQUFLLENBQUMseUJBQXlCQTtRQUN2QzVCLGVBQWUsdUJBQXVCO1FBQ3RDLE9BQU87SUFDVDtBQUNGLEVBQUU7QUFFRiw4REFBOEQ7QUFDdkQsTUFBTTZCLFlBQVksZUFBT0M7UUFBYUMsMkVBQXVCLENBQUM7SUFDbkUsTUFBTXBDLFFBQVFHO0lBRWQsaUNBQWlDO0lBQ2pDLE1BQU1rQyxVQUFVLElBQUlDLFFBQVFGLFFBQVFDLE9BQU87SUFDM0NBLFFBQVFFLEdBQUcsQ0FBQyxnQkFBZ0I7SUFFNUIsSUFBSXZDLE9BQU87UUFDVHFDLFFBQVFFLEdBQUcsQ0FBQyxpQkFBaUIsVUFBZ0IsT0FBTnZDO0lBQ3pDO0lBRUEsT0FBT3dDLE1BQU1MLEtBQUs7UUFDaEIsR0FBR0MsT0FBTztRQUNWQztJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvYXBwL2xpYi9hdXRoLnRzPzAwODMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQXV0aGVudGljYXRpb24gdXRpbGl0eSBmdW5jdGlvbnNcblxuLy8gU3RvcmUgdG9rZW4gaW4gbG9jYWxTdG9yYWdlXG5leHBvcnQgY29uc3Qgc2V0VG9rZW4gPSAodG9rZW46IHN0cmluZyk6IHZvaWQgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXV0aF90b2tlbicsIHRva2VuKTtcbiAgfVxufTtcblxuLy8gR2V0IHRva2VuIGZyb20gbG9jYWxTdG9yYWdlXG5leHBvcnQgY29uc3QgZ2V0VG9rZW4gPSAoKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF90b2tlbicpO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLy8gUmVtb3ZlIHRva2VuIGZyb20gbG9jYWxTdG9yYWdlXG5leHBvcnQgY29uc3QgcmVtb3ZlVG9rZW4gPSAoKTogdm9pZCA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhdXRoX3Rva2VuJyk7XG4gIH1cbn07XG5cbi8vIENoZWNrIGlmIHVzZXIgaXMgYXV0aGVudGljYXRlZFxuZXhwb3J0IGNvbnN0IGlzQXV0aGVudGljYXRlZCA9ICgpOiBib29sZWFuID0+IHtcbiAgY29uc3QgdG9rZW4gPSBnZXRUb2tlbigpO1xuICByZXR1cm4gISF0b2tlbjtcbn07XG5cbi8vIEdldCBhdXRoZW50aWNhdGVkIHVzZXIgZnJvbSB0b2tlblxuZXhwb3J0IGNvbnN0IGdldEF1dGhVc2VyID0gKCk6IGFueSA9PiB7XG4gIGNvbnN0IHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XG4gIFxuICB0cnkge1xuICAgIC8vIERlY29kZSBKV1QgdG9rZW4gKHNpbXBsZSBkZWNvZGUsIG5vdCB2ZXJpZmljYXRpb24pXG4gICAgY29uc3QgYmFzZTY0VXJsID0gdG9rZW4uc3BsaXQoJy4nKVsxXTtcbiAgICBjb25zdCBiYXNlNjQgPSBiYXNlNjRVcmwucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKTtcbiAgICBjb25zdCBqc29uUGF5bG9hZCA9IGRlY29kZVVSSUNvbXBvbmVudChcbiAgICAgIGF0b2IoYmFzZTY0KVxuICAgICAgICAuc3BsaXQoJycpXG4gICAgICAgIC5tYXAoKGMpID0+ICclJyArICgnMDAnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpKVxuICAgICAgICAuam9pbignJylcbiAgICApO1xuICAgIFxuICAgIGNvbnN0IHBheWxvYWQgPSBKU09OLnBhcnNlKGpzb25QYXlsb2FkKTtcbiAgICBjb25zb2xlLmxvZygnRGVjb2RlZCBKV1QgcGF5bG9hZDonLCBwYXlsb2FkKTsgLy8gRGVidWcgbG9nIHRvIHNlZSB0aGUgYWN0dWFsIHBheWxvYWQgc3RydWN0dXJlXG4gICAgXG4gICAgLy8gUmV0dXJuIHVzZXIgb2JqZWN0IHdpdGggY29uc2lzdGVudCBzdHJ1Y3R1cmUgZm9yIGZyb250ZW5kIGNvbXBvbmVudHNcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHBheWxvYWQuc3ViLFxuICAgICAgbmFtZTogcGF5bG9hZC51c2VybmFtZSB8fCAnVW5rbm93bicsXG4gICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCxcbiAgICAgIHJvbGU6IHBheWxvYWQucm9sZVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVjb2RpbmcgdG9rZW46JywgZXJyb3IpO1xuICAgIHJlbW92ZVRva2VuKCk7IC8vIFJlbW92ZSBpbnZhbGlkIHRva2VuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbi8vIENyZWF0ZSBhdXRoZW50aWNhdGVkIGZldGNoIGZ1bmN0aW9uIHRoYXQgaW5jbHVkZXMgdGhlIHRva2VuXG5leHBvcnQgY29uc3QgYXV0aEZldGNoID0gYXN5bmMgKHVybDogc3RyaW5nLCBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9KTogUHJvbWlzZTxSZXNwb25zZT4gPT4ge1xuICBjb25zdCB0b2tlbiA9IGdldFRva2VuKCk7XG4gIFxuICAvLyBDcmVhdGUgYSBwcm9wZXIgSGVhZGVycyBvYmplY3RcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycyk7XG4gIGhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICBcbiAgaWYgKHRva2VuKSB7XG4gICAgaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW59YCk7XG4gIH1cbiAgXG4gIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGhlYWRlcnMsXG4gIH0pO1xufTtcbiJdLCJuYW1lcyI6WyJzZXRUb2tlbiIsInRva2VuIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldFRva2VuIiwiZ2V0SXRlbSIsInJlbW92ZVRva2VuIiwicmVtb3ZlSXRlbSIsImlzQXV0aGVudGljYXRlZCIsImdldEF1dGhVc2VyIiwiYmFzZTY0VXJsIiwic3BsaXQiLCJiYXNlNjQiLCJyZXBsYWNlIiwianNvblBheWxvYWQiLCJkZWNvZGVVUklDb21wb25lbnQiLCJhdG9iIiwibWFwIiwiYyIsImNoYXJDb2RlQXQiLCJ0b1N0cmluZyIsInNsaWNlIiwiam9pbiIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCJjb25zb2xlIiwibG9nIiwiaWQiLCJzdWIiLCJuYW1lIiwidXNlcm5hbWUiLCJlbWFpbCIsInJvbGUiLCJlcnJvciIsImF1dGhGZXRjaCIsInVybCIsIm9wdGlvbnMiLCJoZWFkZXJzIiwiSGVhZGVycyIsInNldCIsImZldGNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/lib/auth.ts\n"));

/***/ })

});